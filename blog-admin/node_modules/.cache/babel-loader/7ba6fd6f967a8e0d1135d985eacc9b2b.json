{"remainingRequest":"E:\\projects\\blog\\blog-admin\\node_modules\\babel-loader\\lib\\index.js!E:\\projects\\blog\\blog-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\projects\\blog\\blog-admin\\src\\store\\modules\\user.js","dependencies":[{"path":"E:\\projects\\blog\\blog-admin\\src\\store\\modules\\user.js","mtime":1675760965000},{"path":"E:\\projects\\blog\\blog-admin\\babel.config.js","mtime":1675760965000},{"path":"E:\\projects\\blog\\blog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680778862035},{"path":"E:\\projects\\blog\\blog-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1680778862378},{"path":"E:\\projects\\blog\\blog-admin\\node_modules\\eslint-loader\\index.js","mtime":1680778858812}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IHsgbG9naW4sIGxvZ291dCBhcyBfbG9nb3V0LCBnZXRJbmZvIGFzIF9nZXRJbmZvLCBnZXRNZW51VHJlZSB9IGZyb20gJ0AvYXBpL3VzZXInOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHJvdXRlciwgeyBhc3luY1JvdXRlcywgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBzdG9yZSBmcm9tICJAL3N0b3JlIjsKdmFyIGdldERlZmF1bHRTdGF0ZSA9IGZ1bmN0aW9uIGdldERlZmF1bHRTdGF0ZSgpIHsKICByZXR1cm4gewogICAgdG9rZW46IGdldFRva2VuKCksCiAgICBuYW1lOiAnJywKICAgIHJvbGU6IFtdLAogICAgcm91dGVzOiBbXSwKICAgIHByZXM6IFtdLAogICAgYXZhdGFyOiAnJwogIH07Cn07CnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9ST0xFOiBmdW5jdGlvbiBTRVRfUk9MRShzdGF0ZSwgcm9sZSkgewogICAgc3RhdGUucm9sZSA9IHJvbGU7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9LAogIFNFVF9ST1VURVM6IGZ1bmN0aW9uIFNFVF9ST1VURVMoc3RhdGUsIHJvdXRlcykgewogICAgc3RhdGUucm91dGVzID0gcm91dGVzOwogIH0sCiAgU0VUX1BSRVM6IGZ1bmN0aW9uIFNFVF9QUkVTKHN0YXRlLCBidG5MaXN0KSB7CiAgICBzdGF0ZS5wcmVzID0gYnRuTGlzdDsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIHVzZXIgbG9naW4KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgcmVzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAvL2NvbnN0IHsgdXNlcm5hbWUsIHBhc3N3b3JkLGNvZGUsdXVpZH0gPSB1c2VySW5mbwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCByZXMudG9rZW4pOwogICAgICBjb21taXQoJ1NFVF9ST0xFJywgJ2FkbWluJyk7CiAgICAgIHNldFRva2VuKHJlcy50b2tlbik7CiAgICAgIHJlc29sdmUocmVzKTsKICAgIH0pOwogIH0sCiAgZ2V0TWVudTogZnVuY3Rpb24gZ2V0TWVudShfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIGdldE1lbnVUcmVlKCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgbWVudUFyciA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgY29tbWl0KCdTRVRfUk9VVEVTJywgbWVudUFycik7CiAgICAgICAgdmFyIGJ0bkxpc3QgPSBbXTsKICAgICAgICBtZW51QXJyLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgIGl0ZW0uY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoaXRlbTEpIHsKICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gaXRlbTEuY2hpbGRyZW47CiAgICAgICAgICAgIGlmIChjaGlsZHJlbiAhPSBudWxsKSB7CiAgICAgICAgICAgICAgaXRlbTEuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoaXRlbTIpIHsKICAgICAgICAgICAgICAgIGJ0bkxpc3QucHVzaChpdGVtMi51cmwpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBjb21taXQoJ1NFVF9QUkVTJywgYnRuTGlzdCk7CiAgICAgICAgcmVzb2x2ZShyZXNwb25zZSk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9nZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHJldHVybiByZWplY3QoJ1ZlcmlmaWNhdGlvbiBmYWlsZWQsIHBsZWFzZSBMb2dpbiBhZ2Fpbi4nKTsKICAgICAgICB9CiAgICAgICAgdmFyIHVzZXJuYW1lID0gZGF0YS51c2VybmFtZSwKICAgICAgICAgIGF2YXRhciA9IGRhdGEuYXZhdGFyOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCB1c2VybmFtZSk7CiAgICAgICAgY29tbWl0KCdTRVRfQVZBVEFSJywgYXZhdGFyKTsKICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmNCkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY0LmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmNC5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dvdXQoKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CiAgICAgICAgcmVzZXRSb3V0ZXIoKTsKICAgICAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gcmVtb3ZlIHRva2VuCiAgcmVzZXRUb2tlbjogZnVuY3Rpb24gcmVzZXRUb2tlbihfcmVmNSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICByZW1vdmVUb2tlbigpOyAvLyBtdXN0IHJlbW92ZSAgdG9rZW4gIGZpcnN0CiAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"names":["login","logout","getInfo","getMenuTree","getToken","setToken","removeToken","router","asyncRoutes","resetRouter","store","getDefaultState","token","name","role","routes","pres","avatar","state","mutations","RESET_STATE","Object","assign","SET_TOKEN","SET_NAME","SET_ROLE","SET_AVATAR","SET_ROUTES","SET_PRES","btnList","actions","_ref","res","commit","Promise","resolve","reject","getMenu","_ref2","then","response","menuArr","data","forEach","item","children","item1","item2","push","url","catch","error","_ref3","username","_ref4","resetToken","_ref5","namespaced"],"sources":["E:/projects/blog/blog-admin/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo,getMenuTree } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport router, {asyncRoutes, resetRouter} from '@/router'\nimport store from \"@/store\";\n\nconst getDefaultState = () => {\n  return {\n    token: getToken(),\n    name: '',\n    role: [],\n    routes: [],\n    pres: [],\n    avatar: ''\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_ROLE: (state, role) => {\n    state.role = role\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_ROUTES: (state, routes) => {\n    state.routes = routes\n  },\n  SET_PRES: (state, btnList) => {\n    state.pres = btnList\n  }\n}\n\nconst actions = {\n  // user login\n  login({ commit }, res) {\n    //const { username, password,code,uuid} = userInfo\n    return new Promise((resolve, reject) => {\n      commit('SET_TOKEN', res.token)\n      commit('SET_ROLE', 'admin')\n      setToken(res.token)\n      resolve(res)\n    })\n  },\n  getMenu({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getMenuTree().then(response => {\n        let menuArr = response.data\n        commit('SET_ROUTES', menuArr)\n        let btnList =[]\n        menuArr.forEach(item =>{\n          item.children.forEach(item1 =>{\n            let children = item1.children;\n            if (children != null){\n              item1.children.forEach(item2 =>{\n                btnList.push(item2.url)\n              })\n            }\n\n          })\n        })\n        commit('SET_PRES', btnList)\n        resolve(response)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const { data } = response\n        if (!data) {\n          return reject('Verification failed, please Login again.')\n        }\n        const { username, avatar } = data\n        commit('SET_NAME', username)\n        commit('SET_AVATAR', avatar)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      logout().then(() => {\n        removeToken() // must remove  token  first\n        resetRouter()\n        commit('RESET_STATE')\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"],"mappings":"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"}]}