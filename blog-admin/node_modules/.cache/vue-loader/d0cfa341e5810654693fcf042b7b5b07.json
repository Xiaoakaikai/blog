{"remainingRequest":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\javaResource\\shiyi-blog-master\\blog-admin\\src\\views\\listener\\quartz\\log.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\src\\views\\listener\\quartz\\log.vue","mtime":1675760965000},{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680778862035},{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1680778862378},{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680778862035},{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1680778857385}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7ZmV0Y2hMaXN0LGRlbGV0ZUJhdGNoLGNsZWFufSBmcm9tICJAL2FwaS9xdWFydHpMb2ciOwppbXBvcnQge3BhcnNlVGltZX0gZnJvbSAnQC91dGlscycKaW1wb3J0IHtnZXREYXRhQnlEaWN0VHlwZX0gZnJvbSAiQC9hcGkvZGljdERhdGEiCmltcG9ydCB7bWFwR2V0dGVyc30gZnJvbSAidnVleCI7CmltcG9ydCB7aGFzQXV0aH0gZnJvbSAiQC91dGlscy9hdXRoIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJKb2JMb2ciLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyDliqDovb3lsYLkv6Hmga8KICAgICAgbG9hZGluZzogW10sCiAgICAgIC8vIOmAieS4reaVsOe7hAogICAgICBpZHM6IFtdLAogICAgICBqb2JEaWN0TGlzdDpbXSwKICAgICAgam9iRGljdERlZmF1bHRWYWx1ZTogbnVsbCwKICAgICAgLy8g5pi+56S65pCc57Si5p2h5Lu2CiAgICAgIHNob3dTZWFyY2g6IHRydWUsCiAgICAgIC8vIOaAu+adoeaVsAogICAgICB0b3RhbDogMCwKICAgICAgLy8g6LCD5bqm5pel5b+X6KGo5qC85pWw5o2uCiAgICAgIGpvYkxvZ0xpc3Q6IFtdLAogICAgICAvLyDmmK/lkKbmmL7npLrlvLnlh7rlsYIKICAgICAgb3BlbjogZmFsc2UsCiAgICAgIC8vIOaXpeacn+iMg+WbtAogICAgICBkYXRlUmFuZ2U6IFtdLAogICAgICAvLyDooajljZXlj4LmlbAKICAgICAgZm9ybToge30sCiAgICAgIC8vIOafpeivouWPguaVsAogICAgICBwYXJhbXM6IHsKICAgICAgICBwYWdlTm86IDEsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIHN0YXJ0VGltZTpudWxsLAogICAgICAgIGVuZFRpbWU6bnVsbCwKICAgICAgICBqb2JJZDogbnVsbCwKICAgICAgICBqb2JOYW1lOiBudWxsLAogICAgICAgIGpvYkdyb3VwOiBudWxsLAogICAgICAgIHN0YXR1czogbnVsbAogICAgICB9CiAgICB9OwogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMub3BlbkxvYWRpbmcoKTsKICAgIGxldCBqb2JJZCA9IHRoaXMuJHJvdXRlLnF1ZXJ5LmpvYklkOwogICAgaWYgKGpvYklkKSB7CiAgICAgIHRoaXMucGFyYW1zLmpvYklkID0gam9iSWQKICAgIH0KICAgIHRoaXMuZ2V0RGljdExpc3QoKQogICAgdGhpcy5mZXRjaExpc3QoKTsKICB9LAogIGNvbXB1dGVkOnsKICAgIC4uLm1hcEdldHRlcnMoWwogICAgICAncHJlcycKICAgIF0pLAogICAgY2FuRGVsZXRlQmF0Y2g6IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gaGFzQXV0aCh0aGlzLnByZXMsICcvc3lzdGVtL2pvYkxvZy9kZWxldGVCYXRjaCcpCiAgICB9LAogICAgY2FuQ2xlYW46IGZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gaGFzQXV0aCh0aGlzLnByZXMsICcvc3lzdGVtL2pvYkxvZy9jbGVhbicpCiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGljdExpc3Q6IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IGRpY3RUeXBlTGlzdCA9IFsnc3lzX2pvYl9ncm91cCddCiAgICAgIGdldERhdGFCeURpY3RUeXBlKGRpY3RUeXBlTGlzdCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgbGV0IGRpY3RNYXAgPSByZXNwb25zZS5kYXRhOwogICAgICAgIHRoaXMuam9iRGljdExpc3QgPSBkaWN0TWFwLnN5c19qb2JfZ3JvdXAubGlzdAogICAgICAgIHRoaXMuam9iRGljdERlZmF1bHRWYWx1ZSA9IGRpY3RNYXAuc3lzX2pvYl9ncm91cC5kZWZhdWx0VmFsdWUKICAgICAgfSk7CiAgICB9LAogICAgLyoqIOafpeivouiwg+W6puaXpeW/l+WIl+ihqCAqLwogICAgZmV0Y2hMaXN0OiBmdW5jdGlvbiAoKSB7CiAgICAgIGZldGNoTGlzdCh0aGlzLnBhcmFtcykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICB0aGlzLmpvYkxvZ0xpc3QgPSByZXNwb25zZS5kYXRhLnJlY29yZHMKICAgICAgICAgIHRoaXMudG90YWwgPSByZXNwb25zZS5kYXRhLnRvdGFsOwogICAgICAgICAgdGhpcy5sb2FkaW5nLmNsb3NlKCk7CiAgICAgIH0pLmNhdGNoKGVyciA9PnsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgIH0pOwogICAgfSwKICAgIC8vIOi/lOWbnuaMiemSrgogICAgaGFuZGxlQ2xvc2UoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9xdWFydHonfSkKICAgIH0sCiAgICAvKiog5pCc57Si5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVGaW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMucGFyYW1zLnBhZ2VObyA9IDE7CiAgICAgIGlmICh0aGlzLmRhdGVSYW5nZS5sZW5ndGgpewogICAgICAgIHRoaXMucGFyYW1zLnN0YXJ0VGltZSA9IHRoaXMuZGF0ZVJhbmdlWzBdCiAgICAgICAgdGhpcy5wYXJhbXMuZW5kVGltZSA9IHRoaXMuZGF0ZVJhbmdlWzFdCiAgICAgIH0KICAgICAgdGhpcy5mZXRjaExpc3QoKTsKICAgIH0sCiAgICAvKiog6YeN572u5oyJ6ZKu5pON5L2cICovCiAgICByZXNldFF1ZXJ5KCkgewogICAgICB0aGlzLmRhdGVSYW5nZSA9IFtdCiAgICAgIHRoaXMucGFyYW1zIC5zdGFydFRpbWUgPSBudWxsCiAgICAgIHRoaXMucGFyYW1zIC5lbmRUaW1lID0gbnVsbAogICAgICB0aGlzLnBhcmFtcyAuam9iTmFtZSA9IG51bGwKICAgICAgdGhpcy5wYXJhbXMgLmpvYkdyb3VwID0gbnVsbAogICAgICB0aGlzLnBhcmFtcyAuc3RhdHVzID0gbnVsbAogICAgICB0aGlzLmZldGNoTGlzdCgpOwogICAgfSwKICAgIC8vIOWkmumAieahhumAieS4reaVsOaNrgogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHNlbGVjdGlvbikgewogICAgICB0aGlzLmlkcyA9IHNlbGVjdGlvbi5tYXAoaXRlbSA9PiBpdGVtLmlkKTsKICAgIH0sCiAgICAvKiog6K+m57uG5oyJ6ZKu5pON5L2cICovCiAgICBoYW5kbGVWaWV3KHJvdykgewogICAgICB0aGlzLm9wZW4gPSB0cnVlOwogICAgICB0aGlzLmZvcm0gPSByb3c7CiAgICB9LAogICAgLyoqIOWIoOmZpOaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlRGVsZXRlKHJvdykgewogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XorrDlvZUsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgZGVsZXRlQmF0Y2godGhpcy5pZHMpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygiT0siKQogICAgICAgICAgdGhpcy5mZXRjaExpc3QoKQogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycikKICAgICAgICB9KQogICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI5Yig6ZmkJwogICAgICAgIH0pCiAgICAgIH0pCiAgICB9LAogICAgLyoqIOa4heepuuaMiemSruaTjeS9nCAqLwogICAgaGFuZGxlQ2xlYW4oKSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+aYr+WQpuehruiupOa4heepuuaJgOacieiwg+W6puaXpeW/l+aVsOaNrumhuT8nLCAn5o+Q56S6JywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgY2xlYW4oKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIk9LIikKICAgICAgICAgIHRoaXMuZmV0Y2hMaXN0KCkKICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpCiAgICAgICAgfSkKICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgdHlwZTogJ2luZm8nLAogICAgICAgICAgbWVzc2FnZTogJ+WPlua2iOa4heepuicKICAgICAgICB9KQogICAgICB9KQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgdGhpcy5wYXJhbXMucGFnZVNpemUgPSB2YWwKICAgICAgdGhpcy5mZXRjaExpc3QoKQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uICh2YWwpIHsKICAgICAgdGhpcy5wYXJhbXMucGFnZU5vID0gdmFsCiAgICAgIHRoaXMuZmV0Y2hMaXN0KCkKICAgIH0sCiAgICAvLyDmiZPlvIDliqDovb3lsYIKICAgIG9wZW5Mb2FkaW5nKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsKICAgICAgICBsb2NrOiB0cnVlLAogICAgICAgIHRleHQ6ICLmraPlnKjliqDovb3kuK1+IiwKICAgICAgICBzcGlubmVyOiAiZWwtaWNvbi1sb2FkaW5nIiwKICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSgwLCAwLCAwLCAwLjcpIgogICAgICB9KTsKICAgIH0sCiAgICBkYXRhRm9ybWF0OiBmdW5jdGlvbih0aW1lKXsKICAgICAgcmV0dXJuIHBhcnNlVGltZSh0aW1lKQogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["log.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"log.vue","sourceRoot":"src/views/listener/quartz","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-form v-show=\"showSearch\" :inline=\"true\" ref=\"form\" :model=\"params\" label-width=\"68px\">\n      <el-form-item label=\"任务名称\">\n        <el-input style=\"width: 200px\" size=\"small\" v-model=\"params.jobName\" placeholder=\"请输入任务名称\" />\n      </el-form-item>\n      <el-form-item label=\"任务组名\">\n        <el-select size=\"small\" @change='handleFind' clearable style=\"margin-left: 5px\" v-model=\"params.jobGroup\" placeholder=\"请选择组名\">\n          <el-option\n            v-for=\"item in jobDictList\"\n            :key=\"item.value\"\n            :label=\"item.label\"\n            :value=\"item.value\"\n          >\n          </el-option>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"执行状态\">\n        <el-select size=\"small\" @change='handleFind' clearable style=\"margin-left: 5px\" v-model=\"params.status\" placeholder=\"请选择任务状态\">\n          <el-option value=\"0\" label=\"成功\"/>\n          <el-option value=\"1\" label=\"失败\"/>\n        </el-select>\n      </el-form-item>\n      <el-form-item label=\"执行时间\">\n        <el-date-picker\n          size=\"small\"\n          v-model=\"dateRange\"\n          type=\"daterange\"\n          range-separator=\"至\"\n          start-placeholder=\"开始日期\"\n          end-placeholder=\"结束日期\">\n        </el-date-picker>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"mini\" @click=\"handleFind\">查找</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <el-row :gutter=\"10\" class=\"mb8\">\n      <el-col :span=\"1.5\">\n        <el-button\n          v-if=\"canDeleteBatch\"\n          :disabled=\"!ids.length\"\n          type=\"danger\"\n          plain\n          icon=\"el-icon-delete\"\n          size=\"mini\"\n          @click=\"handleDelete\"\n        >批量删除\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"danger\"\n          plain\n          icon=\"el-icon-delete\"\n          size=\"mini\"\n          @click=\"handleClean\"\n          v-if=\"canClean\"\n        >清空\n        </el-button>\n      </el-col>\n      <el-col :span=\"1.5\">\n        <el-button\n          type=\"warning\"\n          plain\n          icon=\"el-icon-back\"\n          size=\"mini\"\n          @click=\"handleClose\"\n        >返回</el-button>\n      </el-col>\n      <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"fetchList\"></right-toolbar>\n    </el-row>\n\n    <!--表格-->\n    <el-table :default-sort = \"{prop: 'createTime', order: 'descending'}\" style=\"width: 100%\" :data=\"jobLogList\" @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" width=\"55\" align=\"center\"/>\n      <el-table-column label=\"日志编号\" width=\"80\" align=\"center\" prop=\"id\">\n        <template slot-scope=\"scope\">\n          {{scope.$index +1}}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"任务名称\" align=\"center\" prop=\"jobName\" :show-overflow-tooltip=\"true\"/>\n      <el-table-column label=\"任务组名\" align=\"center\" prop=\"jobGroup\" :show-overflow-tooltip=\"true\">\n        <template slot-scope=\"scope\">\n          <el-tag v-for=\"item in jobDictList\" :type=\"item.style\" v-if=\"scope.row.jobGroup === item.value\">\n            {{item.label}}\n          </el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"调用目标字符串\" align=\"center\" prop=\"invokeTarget\" :show-overflow-tooltip=\"true\"/>\n      <el-table-column label=\"日志信息\" align=\"center\" prop=\"jobMessage\" :show-overflow-tooltip=\"true\"/>\n      <el-table-column label=\"执行状态\" align=\"center\" prop=\"status\">\n        <template slot-scope=\"scope\">\n          <el-tag v-if=\"scope.row.status === '0'\" type=\"success\">成功</el-tag>\n          <el-tag v-if=\"scope.row.status === '1'\" type=\"danger\">失败</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column sortable label=\"执行时间\" align=\"center\" prop=\"createTime\" width=\"180\">\n        <template slot-scope=\"scope\">\n          <span>{{ dataFormat(scope.row.startTime) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" align=\"center\" class-name=\"small-padding fixed-width\">\n        <template slot-scope=\"scope\">\n          <el-button\n            size=\"mini\"\n            type=\"text\"\n            icon=\"el-icon-view\"\n            @click=\"handleView(scope.row)\"\n\n          >详细\n          </el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <!--分页区域-->\n    <div class=\"pagination-container\" style=\"float: right;margin-bottom: 1.25rem;margin-top: 1.25rem;\">\n      <el-pagination background @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\n                     :current-page=\"params.pageNo\" :page-size=\"params.pageSize\" :page-sizes=\"[10, 20, 30]\"\n                     layout=\"total, sizes,prev, pager, next,jumper\" :total=\"total\">\n      </el-pagination>\n    </div>\n\n    <!-- 调度日志详细 -->\n    <el-dialog title=\"调度日志详细\" :visible.sync=\"open\" width=\"700px\" append-to-body>\n      <el-form ref=\"form\" :model=\"form\" label-width=\"100px\" size=\"mini\">\n        <el-row>\n          <el-col :span=\"12\">\n            <el-form-item label=\"日志序号：\">{{ form.id }}</el-form-item>\n            <el-form-item label=\"任务名称：\">{{ form.jobName }}</el-form-item>\n          </el-col>\n          <el-col :span=\"12\">\n            <el-form-item label=\"任务分组：\">{{ form.jobGroup }}</el-form-item>\n            <el-form-item label=\"执行时间：\">{{ dataFormat(form.startTime) }}</el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"调用方法：\">{{ form.invokeTarget }}</el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"日志信息：\">{{ form.jobMessage }}</el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"执行状态：\">\n              <div v-if=\"form.status === '0'\">成功</div>\n              <div v-else-if=\"form.status === '1'\">失败</div>\n            </el-form-item>\n          </el-col>\n          <el-col :span=\"24\">\n            <el-form-item label=\"异常信息：\" v-if=\"form.status === 1\">{{ form.exceptionInfo }}</el-form-item>\n          </el-col>\n        </el-row>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"open = false\">关 闭</el-button>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport {fetchList,deleteBatch,clean} from \"@/api/quartzLog\";\nimport {parseTime} from '@/utils'\nimport {getDataByDictType} from \"@/api/dictData\"\nimport {mapGetters} from \"vuex\";\nimport {hasAuth} from \"@/utils/auth\";\nexport default {\n  name: \"JobLog\",\n  data() {\n    return {\n      // 加载层信息\n      loading: [],\n      // 选中数组\n      ids: [],\n      jobDictList:[],\n      jobDictDefaultValue: null,\n      // 显示搜索条件\n      showSearch: true,\n      // 总条数\n      total: 0,\n      // 调度日志表格数据\n      jobLogList: [],\n      // 是否显示弹出层\n      open: false,\n      // 日期范围\n      dateRange: [],\n      // 表单参数\n      form: {},\n      // 查询参数\n      params: {\n        pageNo: 1,\n        pageSize: 10,\n        startTime:null,\n        endTime:null,\n        jobId: null,\n        jobName: null,\n        jobGroup: null,\n        status: null\n      }\n    };\n  },\n  created() {\n    this.openLoading();\n    let jobId = this.$route.query.jobId;\n    if (jobId) {\n      this.params.jobId = jobId\n    }\n    this.getDictList()\n    this.fetchList();\n  },\n  computed:{\n    ...mapGetters([\n      'pres'\n    ]),\n    canDeleteBatch: function() {\n      return hasAuth(this.pres, '/system/jobLog/deleteBatch')\n    },\n    canClean: function() {\n      return hasAuth(this.pres, '/system/jobLog/clean')\n    },\n  },\n  methods: {\n    getDictList: function () {\n      let dictTypeList = ['sys_job_group']\n      getDataByDictType(dictTypeList).then(response => {\n        let dictMap = response.data;\n        this.jobDictList = dictMap.sys_job_group.list\n        this.jobDictDefaultValue = dictMap.sys_job_group.defaultValue\n      });\n    },\n    /** 查询调度日志列表 */\n    fetchList: function () {\n      fetchList(this.params).then(response => {\n          this.jobLogList = response.data.records\n          this.total = response.data.total;\n          this.loading.close();\n      }).catch(err =>{\n        console.log(err)\n      });\n    },\n    // 返回按钮\n    handleClose() {\n      this.$router.push({ path: '/quartz'})\n    },\n    /** 搜索按钮操作 */\n    handleFind: function () {\n      this.params.pageNo = 1;\n      if (this.dateRange.length){\n        this.params.startTime = this.dateRange[0]\n        this.params.endTime = this.dateRange[1]\n      }\n      this.fetchList();\n    },\n    /** 重置按钮操作 */\n    resetQuery() {\n      this.dateRange = []\n      this.params .startTime = null\n      this.params .endTime = null\n      this.params .jobName = null\n      this.params .jobGroup = null\n      this.params .status = null\n      this.fetchList();\n    },\n    // 多选框选中数据\n    handleSelectionChange(selection) {\n      this.ids = selection.map(item => item.id);\n    },\n    /** 详细按钮操作 */\n    handleView(row) {\n      this.open = true;\n      this.form = row;\n    },\n    /** 删除按钮操作 */\n    handleDelete(row) {\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        deleteBatch(this.ids).then(res => {\n          this.$message.success(\"OK\")\n          this.fetchList()\n        }).catch(err => {\n          console.error(err)\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消删除'\n        })\n      })\n    },\n    /** 清空按钮操作 */\n    handleClean() {\n      this.$confirm('是否确认清空所有调度日志数据项?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        clean().then(res => {\n          this.$message.success(\"OK\")\n          this.fetchList()\n        }).catch(err => {\n          console.error(err)\n        })\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '取消清空'\n        })\n      })\n    },\n    handleSizeChange: function (val) {\n      this.params.pageSize = val\n      this.fetchList()\n    },\n    handleCurrentChange: function (val) {\n      this.params.pageNo = val\n      this.fetchList()\n    },\n    // 打开加载层\n    openLoading() {\n      this.loading = this.$loading({\n        lock: true,\n        text: \"正在加载中~\",\n        spinner: \"el-icon-loading\",\n        background: \"rgba(0, 0, 0, 0.7)\"\n      });\n    },\n    dataFormat: function(time){\n      return parseTime(time)\n    },\n  }\n};\n</script>\n"]}]}