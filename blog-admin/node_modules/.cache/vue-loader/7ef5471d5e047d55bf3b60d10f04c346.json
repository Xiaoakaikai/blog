{"remainingRequest":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\javaResource\\shiyi-blog-master\\blog-admin\\src\\views\\listener\\user\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\src\\views\\listener\\user\\index.vue","mtime":1675760965000},{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680778862035},{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1680778862378},{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1680778862035},{"path":"D:\\javaResource\\shiyi-blog-master\\blog-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1680778857385}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7b25saW5lVXNlcixraWNrfSBmcm9tICdAL2FwaS91c2VyJwppbXBvcnQge21hcEdldHRlcnN9IGZyb20gInZ1ZXgiOwppbXBvcnQge2hhc0F1dGh9IGZyb20gIkAvdXRpbHMvYXV0aCI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwKICAgICAgcGFyYW1zOiB7CiAgICAgICAgbmFtZTpudWxsLAogICAgICAgIHBhZ2VObzogMSwKICAgICAgICBwYWdlU2l6ZTogMTAKICAgICAgfSwKICAgICAgdG90YWw6MCwKICAgICAgLy8g5Yqg6L295bGC5L+h5oGvCiAgICAgIGxvYWRpbmc6IFtdLAogICAgICB0YWJsZURhdGE6IFtdCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbCiAgICAgICdwcmVzJwogICAgXSksCiAgICBjYW5LaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBoYXNBdXRoKHRoaXMucHJlcywgJy9zeXN0ZW0vdXNlci9raWNrJykKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5vcGVuTG9hZGluZygpCiAgICB0aGlzLmZldGNoTGlzdCgpCiAgfSwKICBtZXRob2RzOnsKICAgIGZldGNoTGlzdDpmdW5jdGlvbiAoKXsKICAgICAgb25saW5lVXNlcih0aGlzLnBhcmFtcykudGhlbihyZXMgPT57CiAgICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YS5yZWNvcmRzCiAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsCiAgICAgICAgdGhpcy5sb2FkaW5nLmNsb3NlKCkKICAgICAgfSkuY2F0Y2goZXJyID0+ewogICAgICAgIGNvbnNvbGUubG9nKGVycikKICAgICAgfSkKICAgIH0sCiAgICBraWNrOmZ1bmN0aW9uIChzY29wZSl7CiAgICAgIGtpY2soe3Rva2VuOnNjb3BlLnJvdy50b2tlblZhbHVlfSkudGhlbihyZXMgPT57CiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKQogICAgICAgIHRoaXMuZmV0Y2hMaXN0KCkKICAgICAgfSkuY2F0Y2goZXJyID0+ewogICAgICAgICBjb25zb2xlLmxvZyhlcnIpCiAgICAgIH0pCiAgICB9LAogICAgaGFuZGxlRmluZDogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnBhcmFtcy5wYWdlTm8gPSAxOwogICAgICB0aGlzLmZldGNoTGlzdCgpCiAgICB9LAogICAgcmVzZXRRdWVyeTogZnVuY3Rpb24gKCl7CiAgICAgIHRoaXMucGFyYW1zLm5hbWU9bnVsbAogICAgICB0aGlzLmZldGNoTGlzdCgpCiAgICB9LAogICAgaGFuZGxlU2l6ZUNoYW5nZTogZnVuY3Rpb24gKHZhbCkgewogICAgICB0aGlzLnBhcmFtcy5wYWdlU2l6ZSA9IHZhbAogICAgICB0aGlzLmZldGNoTGlzdCgpCiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gKHZhbCkgewogICAgICB0aGlzLnBhcmFtcy5wYWdlTm8gPSB2YWwKICAgICAgdGhpcy5mZXRjaExpc3QoKQogICAgfSwKICAgIC8vIOaJk+W8gOWKoOi9veWxggogICAgb3BlbkxvYWRpbmc6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7CiAgICAgICAgbG9jazogdHJ1ZSwKICAgICAgICB0ZXh0OiAi5q2j5Zyo5Yqg6L295LitfiIsCiAgICAgICAgc3Bpbm5lcjogImVsLWljb24tbG9hZGluZyIsCiAgICAgICAgYmFja2dyb3VuZDogInJnYmEoMCwgMCwgMCwgMC43KSIKICAgICAgfSk7CiAgICB9CiAgfSwKfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/listener/user","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <!--查询or添加-->\n    <el-form v-show=\"showSearch\" :inline=\"true\" ref=\"form\" :model=\"params\" label-width=\"68px\">\n      <el-form-item label=\"用户名\">\n        <el-input style=\"width: 150px\" size=\"small\" v-model=\"params.name\" placeholder=\"请输入用户名称\"/>\n      </el-form-item>\n      <el-form-item>\n        <el-button type=\"primary\" icon=\"el-icon-search\" size=\"small\" @click=\"handleFind\">查找</el-button>\n        <el-button icon=\"el-icon-refresh\" size=\"small\" @click=\"resetQuery\">重置</el-button>\n      </el-form-item>\n    </el-form>\n\n    <!-- 表格区域 -->\n    <div>\n      <el-table border :data=\"tableData\" style=\"width: 100%\">\n        <el-table-column align=\"center\" prop=\"avatar\" label=\"头像\"  width=\"180\">\n          <template slot-scope=\"scope\">\n            <div class=\"block\"><el-avatar :size=\"50\" :src=\"scope.row.avatar\"></el-avatar></div>\n          </template>\n        </el-table-column>\n        <el-table-column align=\"center\" prop=\"nickname\" label=\"昵称\" width=\"180\" />\n        <el-table-column align=\"center\" prop=\"ip\" label=\"IP地址\" />\n        <el-table-column align=\"center\" prop=\"city\" label=\"登录地址\" />\n        <el-table-column align=\"center\" prop=\"browser\" label=\"浏览器\" />\n        <el-table-column align=\"center\" prop=\"os\" label=\"操作系统\" />\n        <el-table-column align=\"center\" prop=\"loginTime\" label=\"登录时间\"  width=\"180\" />\n        <el-table-column align=\"center\" label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button v-if=\"canKick\" type=\"danger\" size=\"mini\" @click=\"kick(scope)\">强制下线</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </div>\n\n    <!--分页区域-->\n    <div class=\"pagination-container\" style=\"float: right;margin-bottom: 1.25rem;margin-top: 1.25rem;\">\n      <el-pagination background @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\n                     :current-page=\"params.pageNo\" :page-size=\"params.pageSize\" :page-sizes=\"[10, 20, 30]\"\n                     layout=\"total, sizes,prev, pager, next,jumper\" :total=\"total\">\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {onlineUser,kick} from '@/api/user'\nimport {mapGetters} from \"vuex\";\nimport {hasAuth} from \"@/utils/auth\";\nexport default {\n  data() {\n    return {\n      showSearch: true,\n      params: {\n        name:null,\n        pageNo: 1,\n        pageSize: 10\n      },\n      total:0,\n      // 加载层信息\n      loading: [],\n      tableData: []\n    }\n  },\n  computed: {\n    ...mapGetters([\n      'pres'\n    ]),\n    canKick: function () {\n      return hasAuth(this.pres, '/system/user/kick')\n    },\n  },\n  created() {\n    this.openLoading()\n    this.fetchList()\n  },\n  methods:{\n    fetchList:function (){\n      onlineUser(this.params).then(res =>{\n        this.tableData = res.data.records\n        this.total = res.data.total\n        this.loading.close()\n      }).catch(err =>{\n        console.log(err)\n      })\n    },\n    kick:function (scope){\n      kick({token:scope.row.tokenValue}).then(res =>{\n        this.$message.success(res.message)\n        this.fetchList()\n      }).catch(err =>{\n         console.log(err)\n      })\n    },\n    handleFind: function () {\n      this.params.pageNo = 1;\n      this.fetchList()\n    },\n    resetQuery: function (){\n      this.params.name=null\n      this.fetchList()\n    },\n    handleSizeChange: function (val) {\n      this.params.pageSize = val\n      this.fetchList()\n    },\n    handleCurrentChange: function (val) {\n      this.params.pageNo = val\n      this.fetchList()\n    },\n    // 打开加载层\n    openLoading: function () {\n      this.loading = this.$loading({\n        lock: true,\n        text: \"正在加载中~\",\n        spinner: \"el-icon-loading\",\n        background: \"rgba(0, 0, 0, 0.7)\"\n      });\n    }\n  },\n}\n</script>\n"]}]}